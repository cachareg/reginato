<!DOCTYPE html>
<html lang="en">
<head>
	
	<!-- start: Meta -->
	<meta charset="utf-8">
	<title></title>
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="keyword" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-responsive.min.css" rel="stylesheet">

	<link href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css" rel="stylesheet">
	<script src="js/jquery-1.10.2.min.js"></script> 
	<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script> 
	<style>s

	<style>
	.loader {
	 clear: left; float: left; position: relative; left: 50%; 
	  border: 16px solid #f3f3f3;
	  border-radius: 50%;
	  border-bottom: 16px solid silver;
	  width: 50px;
	  height: 50px;
	  opacity: 0.5;


  -webkit-animation: spin 2s linear infinite;
  animation: spin 2s linear infinite;
}

@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.css_btn_class {
	font-size:16px;
	font-family:Arial;
	font-weight:normal;
	-moz-border-radius:8px;
	-webkit-border-radius:8px;
	border-radius:8px;
	border:1px solid #84bbf3;
	padding:9px 18px;
	text-decoration:none;
	background:-moz-linear-gradient( center top, #79bbff 5%, #378de5 100% );
	background:-ms-linear-gradient( top, #79bbff 5%, #378de5 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#79bbff', endColorstr='#378de5');
	background:-webkit-gradient( linear, left top, left bottom, color-stop(5%, #79bbff), color-stop(100%, #378de5) );
	background-color:#79bbff;
	color:#ffffff;
	display:inline-block;
	text-shadow:1px -1px 0px #528ecc;
 	-webkit-box-shadow:inset 1px 1px 0px 0px #bbdaf7;
 	-moz-box-shadow:inset 1px 1px 0px 0px #bbdaf7;
 	box-shadow:inset 1px 1px 0px 0px #bbdaf7;
}.css_btn_class:hover {
	background:-moz-linear-gradient( center top, #378de5 5%, #79bbff 100% );
	background:-ms-linear-gradient( top, #378de5 5%, #79bbff 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#378de5', endColorstr='#79bbff');
	background:-webkit-gradient( linear, left top, left bottom, color-stop(5%, #378de5), color-stop(100%, #79bbff) );
	background-color:#378de5;
}.css_btn_class:active {
	position:relative;
	top:1px;
}
/* This css button was generated by css-button-generator.com */
</style>

	</style>
	
</head>
	
	
	<body>
		
		
		<div id="conteudo" class="span10" height="900" >
			

			<div class="row-fluid"  >		

				<div class="box span12" scroll="no" style="width:100%" >
					
					<div class="box-content" style="float:left; width:100%">
						
					<div class="loader"></div>

						<div id="tab" style="display:none">
						<table id="example" class="display" cellspacing="0" width="100%">
						  <thead>
							  <tr>  
								  <th>Fábrica</th>
								  <th>Ações</th>
							  </tr>
						  </thead>   
						  <tbody>
							
						  </tbody>

						</table>
						<a  href="javascript:showhide()" class="css_btn_class">inserir</a>  
						
				</div>
		</div>
		</div>
		<div style="width:100% height:100%" scroll="no" overflow: hidden;>
			<object width="100%" height="100%"  id="cadastros" type="text/html" style="overflow:hidden;" scroll="no" overflow: hidden;></object>
		</div>
	</body>					

	<script>

		function showhide() {
			$("#conteudo").load("inserir_fabrica.html");
     	}
     	function getfolder(e) {
    		var files = e.target.files;
    		var path = files[0].webkitRelativePath;
    		var Folder = path.split("/");
    		alert(Folder[3]);
		}

		$('body').on('click', ".edit", function(event){
			console.log("kjsdh");
			$("#conteudo").attr("idid", $(this).attr("objectid"));
			$("#conteudo").load("inserir_produto.html");

		});

		$(' body').on('click', ".delete", function(event){
			//$(".loader").show();
		    //$( "#conteudo" ).css("opacity", "0.5");
			//$($($(this).parent()).parent()).remove();
			//$id = ($(this).attr("objectId"));
			alert("Não é permitido remover fábrica");
			// $.ajax({
			// 	url: "../controllers/cadastros.php",
		 //        data: {action:"removerProduto", id:$(this).attr("objectId")},
		 //        type: "POST",
		 //        success: function(data){
		        		
		 //        		alert("Não é permitido remover fábrica");


			//         },
			//         error: function(data){
			//         	console.log("aqui");
			// 		 	console.log(data);
			// 		 	$(".loader").hide();
			//         }

		 //    });
		});;
		


	</script>
	
			
			<script>
                $(document).ready(function (){

                	 $.ajax({
                            url: "../controllers/cadastros.php",
                            context: document.body,
                            data: "action=getAllFabricas",
                            dataType:'json',
                            type: "GET",
                            success: function(data){
                                var table = $('#example').DataTable();
                                console.log($(data).length);
                                for (var i = 0, len = data.length; i < len; i++) {
                                    if(data[i].ativo){
                                    	console.log(data[i]);
                                         table.row.add( [
                                            data[i].nome,
                                            '<a  objectId='+data[i].id_fabrica+' class="btn btn-info edit"  ><i class="icon-edit "></i></a> <a  objectId='+data[i].id_fabrica+' class="btn btn-danger delete" ><i class="icon-trash "></i> </a>',"",""
                                        ] ).draw( false );

                                        $row = $('#example').find(i);
                                        //console.log($row);
                                        $row.attr("objectId", i);
                                        // $('#example').append('<tr id='+data[i].id_produto+'> <td>'+data[i].nome+'</td> <td>'+data[i].fabrica.nome+' </td> <td><span class="label label-success">Active</span></td><td> <a class="btn btn-info" href="#" onclick="openCar()"><i class="icon-edit "></i></a> <a  objectId='+data[i].id_produto+' class="btn btn-danger delete" ><i class="icon-trash "></i> </a></td></tr>');
                                    }
                                }
                                $("#tab").show();
								$(".loader").hide();
                                   
                                },
                                error: function(data){
                                    console.log(data);
                                    console.log("dfs");
                                }

                        });
                });

                $(window).load(function() {
                    $("#example").dataTable().api();
                });
            
    </script>

</html>