<!DOCTYPE html>
<html lang="en">
<head>
	
	<!-- start: Meta -->
	<meta charset="utf-8">
	<meta name="description" content="SimpliQ - Flat & Responsive Bootstrap Admin Template.">
	<meta name="author" content="Łukasz Holeczek">
	<meta name="keyword" content="SimpliQ, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
	<!-- end: Meta -->
	
	<!-- start: Mobile Specific -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- end: Mobile Specific -->
	
	<!-- start: CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-responsive.min.css" rel="stylesheet">
	<link href="css/style.min.css" rel="stylesheet">
	<link href="css/style-responsive.min.css" rel="stylesheet">
	<link href="css/retina.css" rel="stylesheet">
	<!-- end: CSS -->
	

	<!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	  	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<link id="ie-style" href="css/ie.css" rel="stylesheet">
	<![endif]-->
	
	<!--[if IE 9]>
		<link id="ie9style" href="css/ie9.css" rel="stylesheet">
	<![endif]-->
	
	<!-- start: Favicon and Touch Icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
	<link rel="shortcut icon" href="ico/favicon.png">
	<!-- end: Favicon and Touch Icons -->	
	

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/jquery-ui.css">
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script>
	$( function() {
	$( "#dialog2" ).dialog();
	 } );
	 </script>

	 <style>
	 


	 	.loader2 {
			  border: 16px solid #f3f3f3;
			  border-radius: 50%;
			  border-top: 16px solid #3498db;
			  position: fixed;
			  left:30%;
			  top: 30%;
			  width: 120px;
			  height: 120px;
			  
			  -webkit-animation: spin 2s linear infinite;
			  animation: spin 2s linear infinite;
			}

			@-webkit-keyframes spin {
			  0% { -webkit-transform: rotate(0deg); }
			  100% { -webkit-transform: rotate(360deg); }
			}

			@keyframes spin {
			  0% { transform: rotate(0deg); }
			  100% { transform: rotate(360deg); }
			}
	 </style>

</head>

<body scroll="no" style=" height:100%; display:block; overflow:auto">

	<div id="inserir_fabrica" scroll="no" style="display:block; overflow:auto">

			<div class="row-fluid" id="content" style=" display:block; overflow:auto">		
				<div class="box span12">
					<div class="box-header" data-original-title >
							<h2><i class="icon-user"></i><span class="break"></span>Novo</h2>
					</div>

					<div class="box-content" >

						<form class="form-horizontal" id="form">

							<fieldset id="campos">

								<div class="control-group">
									<label class="control-label" for="focusedInput">Nome: </label>
									<div class="controls">
								  		<input class="input-xlarge focused" id="nome" type="text" value="">
									</div>
								</div>		
								<div class="control-group">
									<label class="control-label" for="focusedInput">Subcategoria: </label>
									<div class="controls">
								  		<input class="input-xlarge focused" id="subcategoria" type="text" value="">
								  		<button class="btn" style="height:30px;" onclick="addSub()" type="button">OK</button>
									</div>
								</div>	
								<div class="control-group">
									<div class="controls" style="width:50%">
										<div id="subcategorias">
											<div class="row-fluid">
												<div class="box span4" onTablet="span6" onDesktop="span4">
													<div class="box-header">
														<h2>Subcategorias</h2>
														<div class="box-icon">
															
														</div>
													</div>
													<div class="box-content">
														<ul class="dashboard-list">
															
														</ul>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>	

								
	
								<div id="actions" style="clear: left; float: left; position: relative; left: 80%; ">
									<button id="salvar" type="button"  class="btn btn-primary">Salvar</button>
									<button type="reset" id="reset" class="btn">Limpar</button>
								</div>
								</div>
							</fieldset>
						</form>
					</div>
				</div>
			</div><!--/span-->
		</div>
	</div>
	<div id="dialog2" style="display:none; overflow:hidden" >


	</script>

<!-- start: JavaScript-->
	<script src="js/jquery-migrate-1.2.1.min.js"></script>	
		<script src="js/jquery-ui-1.10.3.custom.min.js"></script>	
		<script src="js/jquery.ui.touch-punch.js"></script>	
		<script src="js/modernizr.js"></script>	
		<script src="js/bootstrap.min.js"></script>	
		<script src="js/jquery.cookie.js"></script>	
		<script src='js/fullcalendar.min.js'></script>	
		<script src='js/jquery.dataTables.min.js'></script>
		<script src="js/excanvas.js"></script>
	<script src="js/jquery.flot.js"></script>
	<script src="js/jquery.flot.pie.js"></script>
	<script src="js/jquery.flot.stack.js"></script>
	<script src="js/jquery.flot.resize.min.js"></script>
	<script src="js/jquery.flot.time.js"></script>
		
		<script src="js/jquery.chosen.min.js"></script>	
		<script src="js/jquery.uniform.min.js"></script>		
		<script src="js/jquery.cleditor.min.js"></script>	
		<script src="js/jquery.noty.js"></script>	
		<script src="js/jquery.elfinder.min.js"></script>	
		<script src="js/jquery.raty.min.js"></script>	
		<script src="js/jquery.iphone.toggle.js"></script>	
		<script src="js/jquery.uploadify-3.1.min.js"></script>	
		<script src="js/jquery.gritter.min.js"></script>	
		<script src="js/jquery.imagesloaded.js"></script>	
		<script src="js/jquery.masonry.min.js"></script>	
		<script src="js/jquery.knob.modified.js"></script>	
		<script src="js/jquery.sparkline.min.js"></script>	
		<script src="js/counter.min.js"></script>	
		<script src="js/raphael.2.1.0.min.js"></script>
	<script src="js/justgage.1.0.1.min.js"></script>	
		<script src="js/jquery.autosize.min.js"></script>	
		<script src="js/retina.js"></script>
		<script src="js/jquery.placeholder.min.js"></script>
		<script src="js/wizard.min.js"></script>
		<script src="js/core.min.js"></script>	
		<script src="js/charts.min.js"></script>	
		<script src="js/custom.min.js"></script>
		<script>
		function addSub(){
			$(".dashboard-list").append("<li id='nome'>"+$("#subcategoria").val()+" </li>");
		}

		$("#reset").click(function(event){
			$("#subcategorias").remove();
			console.log("aham");
		});

		$("#salvar").click(function(event){
			if($("#nome").val()==""){
				$("#dialog2" ).empty();
		        $("#dialog2").append("<p style='text-align: center; font-size:15' >Insira um nome Válido</p>")
	            $("#dialog2" ).dialog( "open" );
	            return;
			}else{
				$("#content").append("<div class='loader2'> </div>");
				var formData = new FormData();
				formData.append("nome", $("#nome").val());
				var subs=[];
				for(var i =0; i<$($(".dashboard-list").find("li")).length; i++ ){
					subs.push($($($(".dashboard-list").find("li"))[i]).text());
				}
				var jsonString = JSON.stringify(subs);
				formData.append("subcategorias", jsonString);
				formData.append("action","inserirCategoria");
				$("#content").append("<div class='loader2'> </div>");
			    $( "#content" ).css("opacity", "0.5");
				$.ajax({
					url: "../controllers/cadastros.php",
					type: "POST",
					data: formData,
			        dataType:'json',
			        
			        	success: function(data){
			        		$("#dialog2" ).empty();
			            	$("#dialog2").append("<p style='text-align: center; font-size:15' >categoria inserida com sucesso</p>")
		                	$("#dialog2" ).dialog( "open" );
		                	$(".loader2").hide();
		                	$("#content").css("opacity", "1");
		                	$("#nome").val("");
		                	$("#subcategoria").val("");
		                	$("#subcategorias li").remove();

			        	},
			        	error: function(data){
						 	console.log(data);
				        },
				        cache: false,
			            contentType: false,
		            	processData: false
			    });
			}
		});

		$( "#dialog2" ).dialog({
					autoOpen: false,
					
					buttons: [
						{
							text: "Ok",
							click: function() {
								$( this ).dialog( "close" );
								$("#nome").val="";

							}
						}
					]
		});

		</script>
	<!-- end: JavaScript-->
	
</body>
</html>